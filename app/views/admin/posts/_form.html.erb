	<br />
	<%= f.input :subject_id, label: "주제", label_html: { class: "fwb" } %><br />
	<%= f.input :category_id, label: "카테고리", label_html: { class: "fwb" } %><br />


<div class="w300">
	<%= simple_form_for [:admin, @post] do |f| %>
		<% @errors = @post.errors.messages %>
		<%= f.hidden_field :user_id, value: current_user.id %>
		<br>
		<%= f.input :title, label: "제목", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false %>
		<% flash_error_message(:title) %>
		<br>
		<%= f.input :body, label: "본문", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false %>
		<% flash_error_message(:body) %>
		<br>
		<%= f.input :subject_id, label: "주제", label_html: { class: "fwb" }, error: false, :collection => Subject.all.map { |s| [s.name, s.id] }, input_html: { class: "form-control", onChange: "javascript:reloadParentCategory(this.value)"} %>
		<% flash_error_message(:subject_id) %>
		<script type="text/javascript" charset="utf-8">
		function reloadParentCategory(value) {
			console.log(value)
			$.ajax('../reload_parent_category?subject=' + value)
		}
		</script>
		<br>
		<%= f.input :category_id, label: "분류", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false, :collection => Category.category_roles.order(:position).map { |s| [s.name, s.id] }.reject{ |a,i| i == @category.id} %>
		<% flash_error_message(:parent_id) %>
		<br>
		<%= f.input :view_type, label: "뷰타입", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false, collection: Category::VIEW_TYPE %>
		<% flash_error_message(:view_type) %>
		<br>
		<%= f.input :position, label: "순서", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false %>
		<% flash_error_message(:position) %>
		<br>
		<%= f.input :role, label: "종류", label_html: { class: "fwb" }, input_html: { class: "form-control" }, error: false %>
		<% flash_error_message(:role) %>
		<br>
		<%= render "/shared/form_confirm_or_cancel" %>
	<% end %>
</div>